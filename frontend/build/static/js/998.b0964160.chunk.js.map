{"version":3,"file":"static/js/998.b0964160.chunk.js","mappings":"4LAMA,MAmGA,EAnGgCA,KAC9B,MAAOC,EAAMC,IAAWC,EAAAA,EAAAA,WAAS,GAC3BC,GAAcC,EAAAA,EAAAA,QAAO,OACpBC,EAAMC,IAAWJ,EAAAA,EAAAA,UAAS,OAC1BK,EAAQC,IAAaN,EAAAA,EAAAA,UAAS,gCAC/B,iBAAEO,IAAqBC,EAAAA,EAAAA,OAE7BC,EAAAA,EAAAA,WAAU,KACJN,GAAQA,EAAKO,SACfJ,EAAUH,EAAKO,UAEfJ,EAAU,gCAEX,CAACH,KAiBJM,EAAAA,EAAAA,WAAU,KACR,MAAME,EAAsBC,IACtBX,EAAYY,UAAYZ,EAAYY,QAAQC,SAASF,EAAMG,SAC7DhB,GAAQ,IAIZ,OADAiB,SAASC,iBAAiB,YAAaN,GAChC,KACLK,SAASE,oBAAoB,YAAaP,KAE3C,KAEHF,EAAAA,EAAAA,WAAU,KACR,MACMU,GADOC,EAAAA,EAAAA,MACYC,mBAAoBC,IAC3ClB,EAAQkB,GACJA,GAAeA,EAAYZ,SAC7BJ,EAAUgB,EAAYZ,UAEtBJ,EAAU,iCAGd,MAAO,IAAMa,KACZ,IASH,OAAKhB,GAUHoB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,6BAA6BC,IAAKxB,EAAYyB,SAAA,EAC3DC,EAAAA,EAAAA,KAAA,OAEEC,IAAKvB,EACLwB,IAAI,UACJL,UAAU,wBACVM,QA/DiBC,KACrBhC,GAASD,IA+DLkC,QAxBiBC,KACrBC,QAAQC,MAAM,0DACd7B,EAAU,gCAuBN8B,MAAO,CAAEC,OAAQ,UAAWC,MAAO,OAAQC,OAAQ,OAAQC,aAAc,QANpEnC,GAQNP,IACCyB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBE,SAAA,EAClCC,EAAAA,EAAAA,KAACc,EAAAA,GAAI,CAACC,GAAG,YAAYlB,UAAU,sBAAsBM,QAASA,IAAM/B,GAAQ,GAAO2B,SAAC,eAGpFC,EAAAA,EAAAA,KAACc,EAAAA,GAAI,CAACC,GAAG,WAAWlB,UAAU,sBAAsBM,QAASA,IAAM/B,GAAQ,GAAO2B,SAAC,gBAGnFC,EAAAA,EAAAA,KAAA,UAAQH,UAAU,0CAA0CM,QAvE/Ca,UACnB,MAAMC,GAAOxB,EAAAA,EAAAA,MACb,UACQyB,EAAAA,EAAAA,IAAQD,GACdE,OAAOC,SAASC,KAAO,QACzB,CAAE,MAAOb,GACPD,QAAQC,MAAM,gBAAiBA,EACjC,GAgEwFT,SAAC,kBA1BvFH,EAAAA,EAAAA,MAAA,OAAKC,UAAU,6BAA4BE,SAAA,EACzCC,EAAAA,EAAAA,KAACc,EAAAA,GAAI,CAACC,GAAG,SAASlB,UAAU,WAAUE,SAAC,WACvCC,EAAAA,EAAAA,KAACc,EAAAA,GAAI,CAACC,GAAG,YAAYlB,UAAU,WAAUE,SAAC,gB","sources":["components/NavProfileDropdownRight.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { getAuth, signOut } from 'firebase/auth';\r\nimport { useNotification } from '../contexts/NotificationContext';\r\nimport './NavProfileDropdownRight.css';\r\n\r\nconst NavProfileDropdownRight = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n  const [user, setUser] = useState(null);\r\n  const [imgSrc, setImgSrc] = useState('/icons/Nav-icon/profile.png');\r\n  const { showNotification } = useNotification();\r\n\r\n  useEffect(() => {\r\n    if (user && user.photoURL) {\r\n      setImgSrc(user.photoURL);\r\n    } else {\r\n      setImgSrc('/icons/Nav-icon/profile.png');\r\n    }\r\n  }, [user]);\r\n\r\n  const toggleDropdown = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    const auth = getAuth();\r\n    try {\r\n      await signOut(auth);\r\n      window.location.href = '/login';\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n    }\r\n  };\r\n\r\n  // Close dropdown on outside click\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const auth = getAuth();\r\n    const unsubscribe = auth.onAuthStateChanged((currentUser) => {\r\n      setUser(currentUser);\r\n      if (currentUser && currentUser.photoURL) {\r\n        setImgSrc(currentUser.photoURL);\r\n      } else {\r\n        setImgSrc('/icons/Nav-icon/profile.png');\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const handleImgError = () => {\r\n    console.error('Profile image failed to load, falling back to default.');\r\n    setImgSrc('/icons/Nav-icon/profile.png');\r\n  };\r\n\r\n\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"nav-profile-login-register\">\r\n        <Link to=\"/login\" className=\"nav-link\">Login</Link>\r\n        <Link to=\"/register\" className=\"nav-link\">Register</Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"nav-profile-dropdown-right\" ref={dropdownRef}>\r\n      <img\r\n        key={imgSrc}\r\n        src={imgSrc}\r\n        alt=\"Profile\"\r\n        className=\"nav-profile-img-right\"\r\n        onClick={toggleDropdown}\r\n        onError={handleImgError}\r\n        style={{ cursor: 'pointer', width: '32px', height: '32px', borderRadius: '50%' }}\r\n      />\r\n      {open && (\r\n        <div className=\"dropdown-card-right\">\r\n          <Link to=\"/myorders\" className=\"dropdown-item-right\" onClick={() => setOpen(false)}>\r\n            My Orders\r\n          </Link>\r\n          <Link to=\"/profile\" className=\"dropdown-item-right\" onClick={() => setOpen(false)}>\r\n            My Account\r\n          </Link>\r\n          <button className=\"dropdown-item-right logout-button-right\" onClick={handleLogout}>\r\n            Logout\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NavProfileDropdownRight;\r\n"],"names":["NavProfileDropdownRight","open","setOpen","useState","dropdownRef","useRef","user","setUser","imgSrc","setImgSrc","showNotification","useNotification","useEffect","photoURL","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","unsubscribe","getAuth","onAuthStateChanged","currentUser","_jsxs","className","ref","children","_jsx","src","alt","onClick","toggleDropdown","onError","handleImgError","console","error","style","cursor","width","height","borderRadius","Link","to","async","auth","signOut","window","location","href"],"sourceRoot":""}