"use strict";(self.webpackChunkanimespring=self.webpackChunkanimespring||[]).push([[102],{7102:(e,s,c)=>{c.r(s),c.d(s,{default:()=>i});var r=c(9379),t=c(5043),a=c(3216),o=c(5475),n=c(579);const i=()=>{const e=new URLSearchParams((0,a.zy)().search),s=e.get("q")||"",c=e.get("tags")||"",[i,l]=(0,t.useState)([]),[h,d]=(0,t.useState)([]),[u,p]=(0,t.useState)("");return(0,t.useEffect)(()=>{(async()=>{try{const e=await fetch("http://localhost:5000/api/products"),s=await e.json();l(s)}catch(e){console.error("Error fetching products:",e)}})()},[]),(0,t.useEffect)(()=>{let e=i,t="";if(c){const s=c.split(",").map(e=>e.trim().toLowerCase());e=i.filter(e=>e.tags&&e.tags.some(e=>s.some(s=>e.toLowerCase().includes(s)))),t="Found ".concat(e.length," products matching tags: ").concat(s.join(", "))}else if(s){e=((e,s)=>{if(!s)return e;const c=s.toLowerCase(),t=c.split(/\s+/).filter(e=>e.length>0);return e.map(e=>{var s,a,o;let n=0;const i=(null===(s=e.name)||void 0===s?void 0:s.toLowerCase())||"",l=(null===(a=e.description)||void 0===a?void 0:a.toLowerCase())||"",h=(null===(o=e.tags)||void 0===o?void 0:o.map(e=>e.toLowerCase()))||[];return i===c&&(n+=100),i.includes(c)&&(n+=50),t.forEach(e=>{i.includes(e)&&(n+=20)}),h.some(e=>e===c)&&(n+=40),h.forEach(e=>{t.forEach(s=>{e.includes(s)&&(n+=15)})}),l.includes(c)&&(n+=10),t.forEach(e=>{l.includes(e)&&(n+=5)}),(0,r.A)((0,r.A)({},e),{},{searchScore:n})}).filter(e=>e.searchScore>0).sort((e,s)=>s.searchScore-e.searchScore)})(i,s);const c=e.filter(e=>e.searchScore>=50).length,a=e.filter(e=>e.searchScore>=20&&e.searchScore<50).length,o=e.filter(e=>e.searchScore<20).length;t="AI found ".concat(e.length," results: ").concat(c," exact matches, ").concat(a," good matches, ").concat(o," partial matches")}d(e),p(t)},[i,s,c]),(0,n.jsxs)("div",{className:"product-list-container",children:[s?(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{children:['AI Search Results for "',s,'"']}),u&&(0,n.jsx)("p",{className:"search-analysis",children:u})]}):c?(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{style:{display:"none"},children:['Looking for products with tags: "',c,'"']}),(0,n.jsx)("p",{className:"search-analysis",children:u})]}):(0,n.jsx)("h2",{children:"All Products"}),0===h.length?(0,n.jsx)("p",{children:"No products found."}):(0,n.jsx)("ul",{className:"product-list-grid",children:h.map(e=>(0,n.jsx)("li",{className:"product-card",children:(0,n.jsxs)(o.N_,{to:"/product/".concat(encodeURIComponent(e.name),"?id=").concat(e.id),children:[(0,n.jsx)("img",{src:e.imageUrl,alt:e.name,className:"product-image"}),(0,n.jsx)("h3",{children:e.name}),(0,n.jsxs)("p",{className:"price",children:["$",e.price.toFixed(2)]}),e.searchScore&&(0,n.jsxs)("p",{className:"match-score",children:["Match: ",e.searchScore,"%"]})]})},e.id))})]})}}}]);
//# sourceMappingURL=102.d84b9f2e.chunk.js.map