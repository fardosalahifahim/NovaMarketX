"use strict";(self.webpackChunkanimespring=self.webpackChunkanimespring||[]).push([[813],{2813:(t,c,e)=>{e.r(c),e.d(c,{default:()=>l});var a=e(5043),s=e(3216),r=e(2407),n=e(2224),i=e(9722),o=e(579);const l=()=>{const t=(0,s.Zp)(),{cartItems:c,removeFromCart:e,updateQuantity:l}=(0,a.useContext)(n.M),[d,u]=(0,a.useState)({}),[h,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{const t=(await i.A.get("http://localhost:5000/api/products")).data,c={};t.forEach(t=>{c[t.id]=t}),u(c)}catch(t){console.error("Error fetching products:",t)}})()},[]),(0,a.useEffect)(()=>{const t=(0,r.xI)().currentUser;t&&m(t.uid)},[]);const p=t=>t?t.startsWith("http")?t:"http://localhost:5000/".concat(t):"",x=(t,c)=>{const e=(d[t.id]||{}).stock||1/0;if(c>e)alert("Cannot add more than ".concat(e," items. Only ").concat(e," left in stock."));else{if(c<=0){if(!window.confirm("Remove ".concat(t.name," from cart?")))return}l(t.id,c)}};return(0,o.jsxs)("div",{className:"cart-container",children:[(0,o.jsx)("h2",{children:"Your Cart"}),0===c.length?(0,o.jsx)("p",{children:"Your cart is empty."}):(0,o.jsx)("div",{className:"cart-cards-container",children:c.map(t=>{const c=(d[t.id]||{}).imageUrl||t.imageUrl||"";return(0,o.jsxs)("div",{className:"cart-card",children:[(0,o.jsx)("div",{className:"cart-image-container",children:(0,o.jsx)("img",{src:p(c),alt:t.name,className:"cart-image"})}),(0,o.jsxs)("div",{className:"cart-details",children:[(0,o.jsx)("h3",{className:"cart-product-name",children:t.name}),(0,o.jsxs)("p",{className:"cart-product-id",children:["ID: ",t.id]}),(0,o.jsxs)("p",{className:"cart-product-price",children:["$",void 0!==t.price&&null!==t.price?t.price.toFixed(2):"N/A"]}),(0,o.jsxs)("div",{className:"cart-quantity-controls",children:[(0,o.jsx)("button",{className:"quantity-btn",onClick:()=>x(t,t.quantity-1),children:"-"}),(0,o.jsx)("span",{className:"quantity-display",children:t.quantity}),(0,o.jsx)("button",{className:"quantity-btn",onClick:()=>x(t,t.quantity+1),children:"+"})]}),(0,o.jsx)("button",{className:"cart-item-delete",onClick:()=>e(t.id),children:"Delete"})]})]},t.id)})}),c.length>0&&(0,o.jsx)("div",{className:"cart-total",children:(0,o.jsxs)("h3",{children:["Total: $",c.reduce((t,c)=>t+(c.price||0)*(c.quantity||1),0).toFixed(2)]})}),(0,o.jsx)("button",{className:"proceed-checkout-button",onClick:()=>{const e=c.map(t=>t.id).join(","),a="/checkout?userId=".concat(h||"","&productIds=").concat(e);t(a,{state:{fromCart:!0}})},disabled:0===c.length,children:"Proceed to Checkout"})]})}}}]);
//# sourceMappingURL=813.c8f09cc8.chunk.js.map