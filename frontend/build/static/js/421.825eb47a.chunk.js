"use strict";(self.webpackChunkanimespring=self.webpackChunkanimespring||[]).push([[421],{7421:(e,o,t)=>{t.r(o),t.d(o,{default:()=>h});var i=t(5043),c=t(3216),s=t(5475),a=t(2407),n=t(9722),l=t(2224),d=t(5985),r=t(6471),u=t(579);const m=["#00bfff","#ff4500","#ffd700","#8b4513"],v=[37,38,39,40,41,42];const h=()=>{const{addToCart:e}=(0,i.useContext)(l.M),{addToFavorites:o,removeFromFavorites:t,isFavorite:h}=(0,d.r)(),{showNotification:p}=(0,r.hN)(),{productname:f}=(0,c.g)(),g=new URLSearchParams((0,c.zy)().search).get("id"),[b,x]=(0,i.useState)(null),[N,j]=(0,i.useState)(m[0]),[y,k]=(0,i.useState)(v[0]),[w,C]=(0,i.useState)(1),[S,U]=(0,i.useState)(""),[P,z]=(0,i.useState)(null),I=(0,c.Zp)(),F=(0,a.xI)();(0,i.useEffect)(()=>{g?A():x(null)},[g]);const O=async()=>{if(g)try{const e=await n.A.get("http://localhost:5000/api/products/id/"+encodeURIComponent(g));x(o=>JSON.stringify(o)!==JSON.stringify(e.data)?(console.log("Updated product with real-time stock data"),e.data):o),z((new Date).toISOString())}catch(e){console.error("Error fetching current product data:",e)}};(0,i.useEffect)(()=>{if(!b)return;O();const e=setInterval(O,3e4);return()=>clearInterval(e)},[null===b||void 0===b?void 0:b.id]),(0,i.useEffect)(()=>{if(b)if(b.images&&b.images.length>0)U(b.images[0]);else if(b.imageUrl)U(b.imageUrl);else if(b.videos&&b.videos.length>0){const t=b.videos[0];let i=t;if(t.includes("youtube.com/watch")){var e;const o=null===(e=t.match(/v=([^&]+)/))||void 0===e?void 0:e[1];o&&(i="https://www.youtube.com/embed/".concat(o))}else if(t.includes("youtu.be/")){var o;const e=null===(o=t.match(/youtu.be\/([^?]+)/))||void 0===o?void 0:o[1];e&&(i="https://www.youtube.com/embed/".concat(e))}U(i)}},[b]);const A=async()=>{console.log("Fetching product with ID:",g);try{const e=await n.A.get("http://localhost:5000/api/products/id/"+encodeURIComponent(g));console.log("Product data:",e.data),x(e.data)}catch(e){console.error("Error fetching product:",e),x(null)}};if(!b)return(0,u.jsx)("div",{children:"Loading..."});const E="number"===typeof b.price?b.price:0,q=b.images&&b.images.length>0?b.images:[b.imageUrl];return(0,u.jsx)("div",{className:"product-details-container",children:(0,u.jsxs)("div",{className:"product-details-content",children:[(0,u.jsxs)("div",{className:"product-image-section",children:[(0,u.jsx)("div",{className:"main-image-container",children:S.includes("youtube.com/embed")?(0,u.jsx)("iframe",{src:S,title:"Product Video",className:"main-product-video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):(0,u.jsx)("img",{src:S.startsWith("http")?S:"http://localhost:5000/".concat(S),alt:b.name,className:"main-product-image"})}),(0,u.jsxs)("div",{className:"thumbnail-container",children:[q.map((e,o)=>(0,u.jsx)("img",{src:e.startsWith("http")?e:"http://localhost:5000/".concat(e),alt:"".concat(b.name," ").concat(o+1),className:"thumbnail ".concat(S===e?"active":""),onClick:()=>{U(e)}},"image-".concat(o))),b.videos&&b.videos.map((e,o)=>{const t=(e=>{let o=e;if(e.includes("youtube.com/watch")){var t;const i=null===(t=e.match(/v=([^&]+)/))||void 0===t?void 0:t[1];i&&(o="https://www.youtube.com/embed/".concat(i))}else if(e.includes("youtu.be/")){var i;const t=null===(i=e.match(/youtu.be\/([^?]+)/))||void 0===i?void 0:i[1];t&&(o="https://www.youtube.com/embed/".concat(t))}return o})(e),i=(e=>{let o="";var t;if(e.includes("youtube.com/watch"))o=null===(t=e.match(/v=([^&]+)/))||void 0===t?void 0:t[1];else if(e.includes("youtu.be/")){var i;o=null===(i=e.match(/youtu.be\/([^?]+)/))||void 0===i?void 0:i[1]}else if(e.includes("youtube.com/embed/")){var c;o=null===(c=e.match(/embed\/([^?]+)/))||void 0===c?void 0:c[1]}return o?"https://img.youtube.com/vi/".concat(o,"/0.jpg"):""})(e);return(0,u.jsx)("img",{src:i,alt:"Video ".concat(o+1),className:"thumbnail video-thumbnail ".concat(S===t?"active":""),onClick:()=>{U(t)},style:{cursor:"pointer"}},"video-".concat(o))})]})]}),(0,u.jsxs)("div",{className:"product-info",children:[(0,u.jsx)("h2",{className:"product-name",children:b.name||"No Name"}),(0,u.jsx)("p",{className:"product-description",children:b.description||"No Description"}),(0,u.jsxs)("h3",{className:"product-price",children:["$",E.toFixed(2)]}),(0,u.jsxs)("div",{className:"product-colors",children:[(0,u.jsx)("strong",{children:"Color:"}),(0,u.jsx)("div",{className:"color-options",children:m.map(e=>(0,u.jsx)("div",{onClick:()=>j(e),className:"color-circle "+(N===e?"selected":""),style:{backgroundColor:e}},e))})]}),(0,u.jsxs)("div",{className:"product-sizes",children:[(0,u.jsx)("strong",{children:"Size:"}),(0,u.jsx)("div",{className:"size-options",children:v.map(e=>(0,u.jsx)("button",{onClick:()=>k(e),className:"size-button "+(y===e?"selected":""),children:e},e))})]}),(0,u.jsxs)("div",{className:"product-quantity",children:[(0,u.jsx)("strong",{children:"Quantity:"}),(0,u.jsx)("input",{type:"number",min:"1",max:(null===b||void 0===b?void 0:b.stock)||void 0,value:w,onChange:e=>{const o=parseInt(e.target.value)||1,t=(null===b||void 0===b?void 0:b.stock)||1/0;C(Math.min(o,t))},className:"quantity-input"}),(null===b||void 0===b?void 0:b.stock)&&b.stock>0&&(0,u.jsx)("div",{className:"stock-info",children:(0,u.jsxs)("span",{className:"stock-available",children:["Only ",b.stock," left in stock"]})}),0===(null===b||void 0===b?void 0:b.stock)&&(0,u.jsx)("div",{className:"stock-info",children:(0,u.jsx)("span",{className:"out-of-stock",children:"Out of stock"})}),(null===b||void 0===b?void 0:b.maxPerPerson)&&(0,u.jsx)("div",{className:"stock-info",children:(0,u.jsxs)("span",{className:"max-per-person",children:["Max per person: ",b.maxPerPerson]})})]}),(0,u.jsxs)("div",{className:"button-container",children:[(0,u.jsx)("button",{onClick:()=>{if(!F.currentUser)return alert("You are not logged in. Please login to add items to cart."),void I("/login");const o={id:null===b||void 0===b?void 0:b.id,name:null===b||void 0===b?void 0:b.name,price:(null===b||void 0===b?void 0:b.price)||0,color:N,size:y,quantity:w,imageUrl:S||(null===b||void 0===b?void 0:b.imageUrl)||""};e(o),alert("Added to cart!")},className:"add-to-cart-button",disabled:0===(null===b||void 0===b?void 0:b.stock),children:0===(null===b||void 0===b?void 0:b.stock)?"Out of Stock":"Add to cart"}),(0,u.jsx)("button",{onClick:()=>{if(!F.currentUser)return alert("You are not logged in. Please login to proceed to checkout."),void I("/login");const o={id:null===b||void 0===b?void 0:b.id,name:null===b||void 0===b?void 0:b.name,price:(null===b||void 0===b?void 0:b.price)||0,color:N,size:y,quantity:w,imageUrl:S||(null===b||void 0===b?void 0:b.imageUrl)||""};e(o),I("/cart")},className:"buy-now-button",disabled:0===(null===b||void 0===b?void 0:b.stock),children:0===(null===b||void 0===b?void 0:b.stock)?"Out of Stock":"Buy Now"}),(0,u.jsx)("button",{className:"favorite-btn ".concat(h(null===b||void 0===b?void 0:b.id)?"favorited":""),onClick:()=>{if(h(null===b||void 0===b?void 0:b.id))t(null===b||void 0===b?void 0:b.id),p("".concat(null===b||void 0===b?void 0:b.name," removed from favorites"),"info");else{o(b)&&p("".concat(null===b||void 0===b?void 0:b.name," added to favorites"),"success")}},title:h(null===b||void 0===b?void 0:b.id)?"Remove from favorites":"Add to favorites",children:(0,u.jsx)("svg",{className:"favorite-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",fill:"currentColor"})})})]}),(0,u.jsx)("div",{className:"back-to-shop",children:(0,u.jsx)(s.N_,{to:"/",children:"Back to Shop"})})]})]})})}}}]);
//# sourceMappingURL=421.825eb47a.chunk.js.map