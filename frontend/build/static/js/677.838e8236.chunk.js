"use strict";(self.webpackChunkanimespring=self.webpackChunkanimespring||[]).push([[677],{7677:(e,s,r)=>{r.r(s),r.d(s,{default:()=>c});var d=r(9379),n=r(5043),i=r(2407),t=r(579);const c=e=>{let{statusFilter:s}=e;const[r,c]=(0,n.useState)([]),[l,a]=(0,n.useState)([]),[o,h]=(0,n.useState)(!0),p=(0,i.xI)(),[u,j]=(0,n.useState)(null);(0,n.useEffect)(()=>{const e=p.onAuthStateChanged(e=>{j(e)});return()=>e()},[p]),(0,n.useEffect)(()=>{u?(x(u.uid),g()):(c([]),h(!1))},[u,s]);const x=async(e,r)=>{try{let d="http://localhost:5000/api/orders?userId=".concat(e);const n=await fetch(d),i=await n.json();let t=i;if(r)t="delivered"===r?i.filter(e=>"delivered"===e.status):"canceled"===r?i.filter(e=>"canceled"===e.status):i;else if(s)if("history"===s){const e=["canceled","delivered"];t=i.filter(s=>e.includes(s.status))}else t="canceled"===s?i.filter(e=>"canceled"===e.status):"delivered"===s?i.filter(e=>"delivered"===e.status):i.filter(e=>e.status===s);else t=i.filter(e=>"canceled"!==e.status&&"delivered"!==e.status);c(t),h(!1)}catch(d){console.error("Error fetching user orders:",d),h(!1)}},g=async()=>{try{const e=await fetch("http://localhost:5000/api/products"),s=await e.json();a(s)}catch(e){console.error("Error fetching products:",e)}};return u?o?(0,t.jsx)("p",{children:"Loading your orders..."}):0===r.length?(0,t.jsx)("p",{children:"You have no orders."}):(0,t.jsxs)("div",{className:"orders-list-phone",children:[(0,t.jsxs)("h1",{children:["returned"===s&&"My Returns","canceled"===s&&"My Cancellations","history"===s&&"Order History",!s&&"My Orders"]}),(0,t.jsxs)("div",{className:"filter-container-phone",children:[(0,t.jsx)("label",{htmlFor:"orderFilterPhone",children:"Filter Orders: "}),(0,t.jsxs)("select",{id:"orderFilterPhone",onChange:e=>{const s=e.target.value;"dateAsc"===s?c(e=>[...e].sort((e,s)=>new Date(e.orderDate)-new Date(s.orderDate))):"dateDesc"===s?c(e=>[...e].sort((e,s)=>new Date(s.orderDate)-new Date(e.orderDate))):"delivered"===s?x(u.uid,"delivered"):"canceled"===s?x(u.uid,"canceled"):x(u.uid)},children:[(0,t.jsx)("option",{value:"all",children:"All"}),(0,t.jsx)("option",{value:"delivered",children:"Delivered"}),(0,t.jsx)("option",{value:"canceled",children:"Canceled"}),(0,t.jsx)("option",{value:"dateAsc",children:"Date Ascending"}),(0,t.jsx)("option",{value:"dateDesc",children:"Date Descending"})]})]}),r.map(e=>(0,t.jsxs)("div",{className:"order-card-phone",children:[(0,t.jsx)("div",{className:"order-products-phone",children:e.productIds&&e.productIds.length>0?e.productIds.map(e=>{const s=(r=e,l.find(e=>e.id===r));var r;return s?(0,t.jsxs)("div",{className:"product-list-item-phone",children:[(0,t.jsx)("img",{src:s.imageUrl,alt:s.name,className:"product-image-phone"}),(0,t.jsxs)("div",{className:"product-info-phone",children:[(0,t.jsx)("div",{className:"product-name-phone",children:s.name}),(0,t.jsx)("div",{className:"product-id-phone",children:s.id})]})]},e):(0,t.jsxs)("div",{children:["Product ID: ",e," (Not found)"]},e)}):(0,t.jsx)("div",{children:"No products found"})}),(0,t.jsx)("div",{className:"shipping-details-phone",children:e.shippingAddress?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Full Name:"})," ",e.shippingAddress.fullName]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Phone Number:"})," ",e.shippingAddress.phoneNumber]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Building / House No / Floor / Street:"})," ",e.shippingAddress.building]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Colony / Suburb / Locality / Landmark:"})," ",e.shippingAddress.colony]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Region:"})," ",e.shippingAddress.region]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"City:"})," ",e.shippingAddress.city]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Area:"})," ",e.shippingAddress.area]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Address:"})," ",e.shippingAddress.address]})]}):(0,t.jsx)("div",{children:"No shipping details available."})}),(0,t.jsxs)("div",{className:"order-meta-phone",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Order ID:"})," ",e.id]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Status:"})," ","confirmed"===e.status?"processing":e.status]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Price:"})," $",e.totalPrice?e.totalPrice.toFixed(2):"N/A"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Payment Method:"})," ",e.paymentMethod||"N/A"]}),(0,t.jsx)("div",{className:"order-actions-phone",children:"processing"===e.status?(0,t.jsx)("button",{className:"btn-cancel-phone",onClick:()=>(async e=>{try{(await fetch("http://localhost:5000/api/orders/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"canceled"})})).ok?c(s=>s.map(s=>s.id===e?(0,d.A)((0,d.A)({},s),{},{status:"canceled"}):s)):console.error("Failed to cancel order")}catch(s){console.error("Error canceling order:",s)}})(e.id),children:"Cancel Order"}):"canceled"===e.status?(0,t.jsx)("span",{className:"status-canceled-phone",children:"Order Canceled"}):(0,t.jsxs)("span",{className:"status-delivered-phone",children:["Order ",e.status.charAt(0).toUpperCase()+e.status.slice(1)]})})]})]},e.id))]}):(0,t.jsx)("p",{children:"Please log in to view your orders."})}}}]);
//# sourceMappingURL=677.838e8236.chunk.js.map