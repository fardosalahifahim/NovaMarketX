{"version":3,"file":"static/js/605.e910dc54.chunk.js","mappings":"kLAKA,MAQA,EARuBA,KAEnBC,EAAAA,EAAAA,KAAA,WAASC,UAAU,uCAAsCC,UACvDF,EAAAA,EAAAA,KAACG,EAAAA,QAAa,CAACC,aAAa,c,0FCHlC,MAkOA,EAlOsBC,IAAuB,IAAtB,aAAED,GAAcC,EACrC,MAAOC,EAAQC,IAAaC,EAAAA,EAAAA,UAAS,KAC9BC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,KAClCG,EAASC,IAAcJ,EAAAA,EAAAA,WAAS,GACjCK,GAAOC,EAAAA,EAAAA,OACNC,EAAMC,IAAWR,EAAAA,EAAAA,UAAS,OAEjCS,EAAAA,EAAAA,WAAU,KACR,MAAMC,EAAcL,EAAKM,mBAAoBC,IAC3CJ,EAAQI,KAEV,MAAO,IAAMF,KACZ,CAACL,KAEJI,EAAAA,EAAAA,WAAU,KACJF,GACFM,EAAgBN,EAAKO,KACrBC,MAEAhB,EAAU,IACVK,GAAW,KAEZ,CAACG,EAAMX,IAEV,MAAMiB,EAAkBG,MAAOC,EAAQC,KACrC,IACE,IAAIC,EAAG,2CAAAC,OAA8CH,GACrD,MAAMI,QAAYC,MAAMH,GAClBI,QAAaF,EAAIG,OACvB,IAAIC,EAAiBF,EACrB,GAAIL,EAGAO,EADmB,cAAjBP,EACeK,EAAKG,OAAOC,GAA0B,cAAjBA,EAAMC,QAClB,aAAjBV,EACQK,EAAKG,OAAOC,GAA0B,aAAjBA,EAAMC,QAI3BL,OAEd,GAAI3B,EAET,GAAqB,YAAjBA,EAA4B,CAE9B,MAAMiC,EAAkB,CAAC,WAAY,aACrCJ,EAAiBF,EAAKG,OAAOC,GAASE,EAAgBC,SAASH,EAAMC,QACvE,MACEH,EAD0B,aAAjB7B,EACQ2B,EAAKG,OAAOC,GAA0B,aAAjBA,EAAMC,QAClB,cAAjBhC,EACQ2B,EAAKG,OAAOC,GAA0B,cAAjBA,EAAMC,QAE3BL,EAAKG,OAAOC,GAASA,EAAMC,SAAWhC,QAIzD6B,EAAiBF,EAAKG,OAAOC,GAA0B,aAAjBA,EAAMC,QAA0C,cAAjBD,EAAMC,QAE7E7B,EAAU0B,GACVrB,GAAW,EACb,CAAE,MAAO2B,GACPC,QAAQD,MAAM,8BAA+BA,GAC7C3B,GAAW,EACb,GAGIW,EAAgBC,UACpB,IACE,MAAMK,QAAYC,MAAM,sCAClBC,QAAaF,EAAIG,OACvBtB,EAAYqB,EACd,CAAE,MAAOQ,GACPC,QAAQD,MAAM,2BAA4BA,EAC5C,GAqDF,OAAKxB,EAIDJ,GACKX,EAAAA,EAAAA,KAAA,KAAAE,SAAG,2BAGU,IAAlBI,EAAOmC,QACFzC,EAAAA,EAAAA,KAAA,KAAAE,SAAG,yBAIVwC,EAAAA,EAAAA,MAAA,OAAKzC,UAAU,oBAAmBC,SAAA,EAChCwC,EAAAA,EAAAA,MAAA,MAAAxC,SAAA,CACoB,aAAjBE,GAA+B,aACd,aAAjBA,GAA+B,mBACd,YAAjBA,GAA8B,iBAC7BA,GAAgB,gBAEpBsC,EAAAA,EAAAA,MAAA,OAAKzC,UAAU,yBAAwBC,SAAA,EACrCF,EAAAA,EAAAA,KAAA,SAAO2C,QAAQ,mBAAkBzC,SAAC,qBAChCwC,EAAAA,EAAAA,MAAA,UACEE,GAAG,mBACHC,SAAWC,IACT,MAAMC,EAAQD,EAAEE,OAAOD,MACT,YAAVA,EACFxC,EAAW0C,GACT,IAAIA,GAAYC,KAAK,CAACC,EAAGC,IAAM,IAAIC,KAAKF,EAAEG,WAAa,IAAID,KAAKD,EAAEE,aAEjD,aAAVP,EACTxC,EAAW0C,GACT,IAAIA,GAAYC,KAAK,CAACC,EAAGC,IAAM,IAAIC,KAAKD,EAAEE,WAAa,IAAID,KAAKF,EAAEG,aAEjD,cAAVP,EACT1B,EAAgBN,EAAKO,IAAK,aACP,aAAVyB,EACT1B,EAAgBN,EAAKO,IAAK,YAE1BD,EAAgBN,EAAKO,MAEvBpB,SAAA,EAEFF,EAAAA,EAAAA,KAAA,UAAQ+C,MAAM,MAAK7C,SAAC,SACpBF,EAAAA,EAAAA,KAAA,UAAQ+C,MAAM,YAAW7C,SAAC,eAC1BF,EAAAA,EAAAA,KAAA,UAAQ+C,MAAM,WAAU7C,SAAC,cACzBF,EAAAA,EAAAA,KAAA,UAAQ+C,MAAM,UAAS7C,SAAC,oBACxBF,EAAAA,EAAAA,KAAA,UAAQ+C,MAAM,WAAU7C,SAAC,0BAG9BI,EAAOiD,IAAIpB,IACVO,EAAAA,EAAAA,MAAA,OAAoBzC,UAAU,mBAAkBC,SAAA,EAC9CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,uBAAsBC,SAClCiC,EAAMqB,YAAcrB,EAAMqB,WAAWf,OAAS,EAAIN,EAAMqB,WAAWD,IAAIE,IACtE,MAAMC,GAxGMd,EAwGmBa,EAvGlChD,EAASkD,KAAKD,GAAWA,EAAQd,KAAOA,IADzBA,MAyGZ,OAAKc,GAEHhB,EAAAA,EAAAA,MAAA,OAAezC,UAAU,0BAAyBC,SAAA,EAChDF,EAAAA,EAAAA,KAAA,OAAK4D,IAAKF,EAAQG,SAAUC,IAAKJ,EAAQK,KAAM9D,UAAU,yBACzDyC,EAAAA,EAAAA,MAAA,OAAKzC,UAAU,qBAAoBC,SAAA,EACjCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qBAAoBC,SAAEwD,EAAQK,QAC7C/D,EAAAA,EAAAA,KAAA,OAAKC,UAAU,mBAAkBC,SAAEwD,EAAQd,UAJrCa,IAFSf,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,CAAe,eAAauD,EAAI,iBAAtBA,MAU5BzD,EAAAA,EAAAA,KAAA,OAAAE,SAAK,yBAEZF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yBAAwBC,SACpCiC,EAAM6B,iBACLtB,EAAAA,EAAAA,MAAAuB,EAAAA,SAAA,CAAA/D,SAAA,EACEwC,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,EAAKF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,eAAmB,IAAEiC,EAAM6B,gBAAgBE,aACxDxB,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,EAAKF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,kBAAsB,IAAEiC,EAAM6B,gBAAgBG,gBAC3DzB,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,EAAKF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,0CAA8C,IAAEiC,EAAM6B,gBAAgBI,aACnF1B,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,EAAKF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,2CAA+C,IAAEiC,EAAM6B,gBAAgBK,WACpF3B,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,EAAKF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,YAAgB,IAAEiC,EAAM6B,gBAAgBM,WACrD5B,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,EAAKF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,UAAc,IAAEiC,EAAM6B,gBAAgBO,SACnD7B,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,EAAKF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,UAAc,IAAEiC,EAAM6B,gBAAgBQ,SACnD9B,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,EAAKF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,aAAiB,IAAEiC,EAAM6B,gBAAgBS,eAEtDzE,EAAAA,EAAAA,KAAA,OAAAE,SAAK,sCAEXwC,EAAAA,EAAAA,MAAA,OAAKzC,UAAU,mBAAkBC,SAAA,EAC/BwC,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,EAAKF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,cAAkB,IAAEiC,EAAMS,OACvCF,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,EAAKF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,YAAgB,IAAmB,cAAjBiC,EAAMC,OAAyB,aAAeD,EAAMC,WACnFM,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,EAAKF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,WAAe,KAAGiC,EAAMuC,WAAavC,EAAMuC,WAAWC,QAAQ,GAAK,UAChFjC,EAAAA,EAAAA,MAAA,OAAAxC,SAAA,EAAKF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,oBAAwB,IAAEiC,EAAMyC,eAAiB,UAC5D5E,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sBAAqBC,SACtB,eAAjBiC,EAAMC,QACLpC,EAAAA,EAAAA,KAAA,UAAQC,UAAU,mBAAmB4E,QAASA,IAtI9BrD,WACxB,WACoBM,MAAM,oCAADF,OAAqCkD,GAAW,CACrEC,OAAQ,QACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAAE/C,OAAQ,gBAEzBgD,GACN7E,EAAU0C,GACRA,EAAWM,IAAIpB,GACbA,EAAMS,KAAOkC,GAAOO,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQlD,GAAK,IAAEC,OAAQ,aAAeD,IAI9DK,QAAQD,MAAM,yBAElB,CAAE,MAAOA,GACPC,QAAQD,MAAM,yBAA0BA,EAC1C,GAkH4D+C,CAAkBnD,EAAMS,IAAI1C,SAAC,iBAEhE,aAAjBiC,EAAMC,QAAwBpC,EAAAA,EAAAA,KAAA,QAAMC,UAAU,wBAAuBC,SAAC,oBAAwBwC,EAAAA,EAAAA,MAAA,QAAMzC,UAAU,yBAAwBC,SAAA,CAAC,SAAOiC,EAAMC,OAAOmD,OAAO,GAAGC,cAAgBrD,EAAMC,OAAOqD,MAAM,aAvClMtD,EAAMS,SAlDb5C,EAAAA,EAAAA,KAAA,KAAAE,SAAG,uC","sources":["components/MyReturnsPhone.js","components/MyOrdersPhone.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { getAuth } from 'firebase/auth';\r\nimport MyOrdersPhone from './MyOrdersPhone';\r\nimport './MyReturnsPhone.css';\r\n\r\nconst MyReturnsPhone = () => {\r\n  return (\r\n    <section className=\"profile-section orders-section-phone\">\r\n      <MyOrdersPhone statusFilter=\"returned\" />\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default MyReturnsPhone;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { getAuth } from 'firebase/auth';\r\n\r\nimport './MyOrdersPhone.css';\r\n\r\nconst MyOrdersPhone = ({ statusFilter }) => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const auth = getAuth();\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged((currentUser) => {\r\n      setUser(currentUser);\r\n    });\r\n    return () => unsubscribe();\r\n  }, [auth]);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchUserOrders(user.uid);\r\n      fetchProducts();\r\n    } else {\r\n      setOrders([]);\r\n      setLoading(false);\r\n    }\r\n  }, [user, statusFilter]);\r\n\r\n  const fetchUserOrders = async (userId, filterStatus) => {\r\n    try {\r\n      let url = `http://localhost:5000/api/orders?userId=${userId}`;\r\n      const res = await fetch(url);\r\n      const data = await res.json();\r\n      let filteredOrders = data;\r\n      if (filterStatus) {\r\n        // Filter by the selected status from dropdown\r\n        if (filterStatus === 'delivered') {\r\n          filteredOrders = data.filter(order => order.status === 'delivered');\r\n        } else if (filterStatus === 'canceled') {\r\n          filteredOrders = data.filter(order => order.status === 'canceled');\r\n        } else {\r\n          // For other statuses, we might want to implement specific filtering logic\r\n          // For now, we'll just return all orders for other statuses\r\n          filteredOrders = data;\r\n        }\r\n      } else if (statusFilter) {\r\n        // Filter by the statusFilter prop (used when component is first loaded or prop changes)\r\n        if (statusFilter === 'history') {\r\n          // Show only orders that are canceled or delivered\r\n          const historyStatuses = ['canceled', 'delivered'];\r\n          filteredOrders = data.filter(order => historyStatuses.includes(order.status));\r\n        } else if (statusFilter === 'canceled') {\r\n          filteredOrders = data.filter(order => order.status === 'canceled');\r\n        } else if (statusFilter === 'delivered') {\r\n          filteredOrders = data.filter(order => order.status === 'delivered');\r\n        } else {\r\n          filteredOrders = data.filter(order => order.status === statusFilter);\r\n        }\r\n      } else {\r\n        // No statusFilter provided, show only orders not canceled or delivered (in process)\r\n        filteredOrders = data.filter(order => order.status !== 'canceled' && order.status !== 'delivered');\r\n      }\r\n      setOrders(filteredOrders);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error fetching user orders:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/products');\r\n      const data = await res.json();\r\n      setProducts(data);\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n    }\r\n  };\r\n\r\n  const getProductById = (id) => {\r\n    return products.find(product => product.id === id);\r\n  };\r\n\r\n  const handleCancelOrder = async (orderId) => {\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/api/orders/${orderId}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ status: 'canceled' }),\r\n      });\r\n      if (res.ok) {\r\n        setOrders(prevOrders =>\r\n          prevOrders.map(order =>\r\n            order.id === orderId ? { ...order, status: 'canceled' } : order\r\n          )\r\n        );\r\n      } else {\r\n        console.error('Failed to cancel order');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error canceling order:', error);\r\n    }\r\n  };\r\n\r\n  const handleShipOrder = async (orderId) => {\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/api/orders/${orderId}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ status: 'shipped' }),\r\n      });\r\n      if (res.ok) {\r\n        setOrders(prevOrders =>\r\n          prevOrders.map(order =>\r\n            order.id === orderId ? { ...order, status: 'shipped' } : order\r\n          )\r\n        );\r\n      } else {\r\n        console.error('Failed to mark order as shipped');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error marking order as shipped:', error);\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return <p>Please log in to view your orders.</p>;\r\n  }\r\n\r\n  if (loading) {\r\n    return <p>Loading your orders...</p>;\r\n  }\r\n\r\n  if (orders.length === 0) {\r\n    return <p>You have no orders.</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"orders-list-phone\">\r\n      <h1>\r\n        {statusFilter === 'returned' && 'My Returns'}\r\n        {statusFilter === 'canceled' && 'My Cancellations'}\r\n        {statusFilter === 'history' && 'Order History'}\r\n        {!statusFilter && 'My Orders'}\r\n      </h1>\r\n      <div className=\"filter-container-phone\">\r\n        <label htmlFor=\"orderFilterPhone\">Filter Orders: </label>\r\n          <select\r\n            id=\"orderFilterPhone\"\r\n            onChange={(e) => {\r\n              const value = e.target.value;\r\n              if (value === 'dateAsc') {\r\n                setOrders((prevOrders) =>\r\n                  [...prevOrders].sort((a, b) => new Date(a.orderDate) - new Date(b.orderDate))\r\n                );\r\n              } else if (value === 'dateDesc') {\r\n                setOrders((prevOrders) =>\r\n                  [...prevOrders].sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate))\r\n                );\r\n              } else if (value === 'delivered') {\r\n                fetchUserOrders(user.uid, 'delivered');\r\n              } else if (value === 'canceled') {\r\n                fetchUserOrders(user.uid, 'canceled');\r\n              } else {\r\n                fetchUserOrders(user.uid);\r\n              }\r\n            }}\r\n          >\r\n            <option value=\"all\">All</option>\r\n            <option value=\"delivered\">Delivered</option>\r\n            <option value=\"canceled\">Canceled</option>\r\n            <option value=\"dateAsc\">Date Ascending</option>\r\n            <option value=\"dateDesc\">Date Descending</option>\r\n          </select>\r\n      </div>\r\n      {orders.map(order => (\r\n        <div key={order.id} className=\"order-card-phone\">\r\n          <div className=\"order-products-phone\">\r\n            {order.productIds && order.productIds.length > 0 ? order.productIds.map(pid => {\r\n              const product = getProductById(pid);\r\n              if (!product) return <div key={pid}>Product ID: {pid} (Not found)</div>;\r\n              return (\r\n                <div key={pid} className=\"product-list-item-phone\">\r\n                  <img src={product.imageUrl} alt={product.name} className=\"product-image-phone\" />\r\n                  <div className=\"product-info-phone\">\r\n                    <div className=\"product-name-phone\">{product.name}</div>\r\n                    <div className=\"product-id-phone\">{product.id}</div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            }) : <div>No products found</div>}\r\n          </div>\r\n          <div className=\"shipping-details-phone\">\r\n            {order.shippingAddress ? (\r\n              <>\r\n                <div><strong>Full Name:</strong> {order.shippingAddress.fullName}</div>\r\n                <div><strong>Phone Number:</strong> {order.shippingAddress.phoneNumber}</div>\r\n                <div><strong>Building / House No / Floor / Street:</strong> {order.shippingAddress.building}</div>\r\n                <div><strong>Colony / Suburb / Locality / Landmark:</strong> {order.shippingAddress.colony}</div>\r\n                <div><strong>Region:</strong> {order.shippingAddress.region}</div>\r\n                <div><strong>City:</strong> {order.shippingAddress.city}</div>\r\n                <div><strong>Area:</strong> {order.shippingAddress.area}</div>\r\n                <div><strong>Address:</strong> {order.shippingAddress.address}</div>\r\n              </>\r\n            ) : <div>No shipping details available.</div>}\r\n          </div>\r\n          <div className=\"order-meta-phone\">\r\n            <div><strong>Order ID:</strong> {order.id}</div>\r\n            <div><strong>Status:</strong> {order.status === 'confirmed' ? 'processing' : order.status}</div>\r\n            <div><strong>Price:</strong> ${order.totalPrice ? order.totalPrice.toFixed(2) : 'N/A'}</div>\r\n            <div><strong>Payment Method:</strong> {order.paymentMethod || 'N/A'}</div>\r\n              <div className=\"order-actions-phone\">\r\n          {order.status === 'processing' ? (\r\n            <button className=\"btn-cancel-phone\" onClick={() => handleCancelOrder(order.id)}>Cancel Order</button>\r\n          ) : (\r\n            order.status === 'canceled' ? <span className=\"status-canceled-phone\">Order Canceled</span> : <span className=\"status-delivered-phone\">Order {order.status.charAt(0).toUpperCase() + order.status.slice(1)}</span>\r\n          )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyOrdersPhone;\r\n"],"names":["MyReturnsPhone","_jsx","className","children","MyOrdersPhone","statusFilter","_ref","orders","setOrders","useState","products","setProducts","loading","setLoading","auth","getAuth","user","setUser","useEffect","unsubscribe","onAuthStateChanged","currentUser","fetchUserOrders","uid","fetchProducts","async","userId","filterStatus","url","concat","res","fetch","data","json","filteredOrders","filter","order","status","historyStatuses","includes","error","console","length","_jsxs","htmlFor","id","onChange","e","value","target","prevOrders","sort","a","b","Date","orderDate","map","productIds","pid","product","find","src","imageUrl","alt","name","shippingAddress","_Fragment","fullName","phoneNumber","building","colony","region","city","area","address","totalPrice","toFixed","paymentMethod","onClick","orderId","method","headers","body","JSON","stringify","ok","_objectSpread","handleCancelOrder","charAt","toUpperCase","slice"],"sourceRoot":""}