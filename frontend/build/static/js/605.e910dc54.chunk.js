"use strict";(self.webpackChunkanimespring=self.webpackChunkanimespring||[]).push([[605,677],{4605:(e,s,r)=>{r.r(s),r.d(s,{default:()=>t});r(5043),r(2407);var d=r(7677),n=r(579);const t=()=>(0,n.jsx)("section",{className:"profile-section orders-section-phone",children:(0,n.jsx)(d.default,{statusFilter:"returned"})})},7677:(e,s,r)=>{r.r(s),r.d(s,{default:()=>c});var d=r(9379),n=r(5043),t=r(2407),i=r(579);const c=e=>{let{statusFilter:s}=e;const[r,c]=(0,n.useState)([]),[l,a]=(0,n.useState)([]),[o,h]=(0,n.useState)(!0),p=(0,t.xI)(),[u,j]=(0,n.useState)(null);(0,n.useEffect)(()=>{const e=p.onAuthStateChanged(e=>{j(e)});return()=>e()},[p]),(0,n.useEffect)(()=>{u?(x(u.uid),v()):(c([]),h(!1))},[u,s]);const x=async(e,r)=>{try{let d="http://localhost:5000/api/orders?userId=".concat(e);const n=await fetch(d),t=await n.json();let i=t;if(r)i="delivered"===r?t.filter(e=>"delivered"===e.status):"canceled"===r?t.filter(e=>"canceled"===e.status):t;else if(s)if("history"===s){const e=["canceled","delivered"];i=t.filter(s=>e.includes(s.status))}else i="canceled"===s?t.filter(e=>"canceled"===e.status):"delivered"===s?t.filter(e=>"delivered"===e.status):t.filter(e=>e.status===s);else i=t.filter(e=>"canceled"!==e.status&&"delivered"!==e.status);c(i),h(!1)}catch(d){console.error("Error fetching user orders:",d),h(!1)}},v=async()=>{try{const e=await fetch("http://localhost:5000/api/products"),s=await e.json();a(s)}catch(e){console.error("Error fetching products:",e)}};return u?o?(0,i.jsx)("p",{children:"Loading your orders..."}):0===r.length?(0,i.jsx)("p",{children:"You have no orders."}):(0,i.jsxs)("div",{className:"orders-list-phone",children:[(0,i.jsxs)("h1",{children:["returned"===s&&"My Returns","canceled"===s&&"My Cancellations","history"===s&&"Order History",!s&&"My Orders"]}),(0,i.jsxs)("div",{className:"filter-container-phone",children:[(0,i.jsx)("label",{htmlFor:"orderFilterPhone",children:"Filter Orders: "}),(0,i.jsxs)("select",{id:"orderFilterPhone",onChange:e=>{const s=e.target.value;"dateAsc"===s?c(e=>[...e].sort((e,s)=>new Date(e.orderDate)-new Date(s.orderDate))):"dateDesc"===s?c(e=>[...e].sort((e,s)=>new Date(s.orderDate)-new Date(e.orderDate))):"delivered"===s?x(u.uid,"delivered"):"canceled"===s?x(u.uid,"canceled"):x(u.uid)},children:[(0,i.jsx)("option",{value:"all",children:"All"}),(0,i.jsx)("option",{value:"delivered",children:"Delivered"}),(0,i.jsx)("option",{value:"canceled",children:"Canceled"}),(0,i.jsx)("option",{value:"dateAsc",children:"Date Ascending"}),(0,i.jsx)("option",{value:"dateDesc",children:"Date Descending"})]})]}),r.map(e=>(0,i.jsxs)("div",{className:"order-card-phone",children:[(0,i.jsx)("div",{className:"order-products-phone",children:e.productIds&&e.productIds.length>0?e.productIds.map(e=>{const s=(r=e,l.find(e=>e.id===r));var r;return s?(0,i.jsxs)("div",{className:"product-list-item-phone",children:[(0,i.jsx)("img",{src:s.imageUrl,alt:s.name,className:"product-image-phone"}),(0,i.jsxs)("div",{className:"product-info-phone",children:[(0,i.jsx)("div",{className:"product-name-phone",children:s.name}),(0,i.jsx)("div",{className:"product-id-phone",children:s.id})]})]},e):(0,i.jsxs)("div",{children:["Product ID: ",e," (Not found)"]},e)}):(0,i.jsx)("div",{children:"No products found"})}),(0,i.jsx)("div",{className:"shipping-details-phone",children:e.shippingAddress?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Full Name:"})," ",e.shippingAddress.fullName]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Phone Number:"})," ",e.shippingAddress.phoneNumber]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Building / House No / Floor / Street:"})," ",e.shippingAddress.building]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Colony / Suburb / Locality / Landmark:"})," ",e.shippingAddress.colony]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Region:"})," ",e.shippingAddress.region]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"City:"})," ",e.shippingAddress.city]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Area:"})," ",e.shippingAddress.area]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Address:"})," ",e.shippingAddress.address]})]}):(0,i.jsx)("div",{children:"No shipping details available."})}),(0,i.jsxs)("div",{className:"order-meta-phone",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Order ID:"})," ",e.id]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Status:"})," ","confirmed"===e.status?"processing":e.status]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Price:"})," $",e.totalPrice?e.totalPrice.toFixed(2):"N/A"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Payment Method:"})," ",e.paymentMethod||"N/A"]}),(0,i.jsx)("div",{className:"order-actions-phone",children:"processing"===e.status?(0,i.jsx)("button",{className:"btn-cancel-phone",onClick:()=>(async e=>{try{(await fetch("http://localhost:5000/api/orders/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"canceled"})})).ok?c(s=>s.map(s=>s.id===e?(0,d.A)((0,d.A)({},s),{},{status:"canceled"}):s)):console.error("Failed to cancel order")}catch(s){console.error("Error canceling order:",s)}})(e.id),children:"Cancel Order"}):"canceled"===e.status?(0,i.jsx)("span",{className:"status-canceled-phone",children:"Order Canceled"}):(0,i.jsxs)("span",{className:"status-delivered-phone",children:["Order ",e.status.charAt(0).toUpperCase()+e.status.slice(1)]})})]})]},e.id))]}):(0,i.jsx)("p",{children:"Please log in to view your orders."})}}}]);
//# sourceMappingURL=605.e910dc54.chunk.js.map