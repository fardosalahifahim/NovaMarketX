"use strict";(self.webpackChunkanimespring=self.webpackChunkanimespring||[]).push([[254,683],{3254:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});var n=s(5043),t=s(579);const r=e=>{let{onSelectPaymentMethod:a}=e;const[s,r]=(0,n.useState)(null),l=e=>{r(e),a&&a(e)};return console.log("PaymentGateway component rendered"),(0,t.jsxs)("div",{className:"payment-gateway-container",children:[(0,t.jsx)("h2",{children:"Select Payment Method"}),(0,t.jsxs)("div",{className:"payment-methods",children:[(0,t.jsx)("button",{className:"Credit/Debit Card"===s?"selected":"",onClick:()=>l("Credit/Debit Card"),children:"Credit/Debit Card"}),(0,t.jsx)("button",{className:"Nagad"===s?"selected":"",onClick:()=>l("Nagad"),children:"Nagad"}),(0,t.jsx)("button",{className:"Save bKash Account"===s?"selected":"",onClick:()=>l("Save bKash Account"),children:"Save bKash Account"}),(0,t.jsx)("button",{className:"Cash on Delivery"===s?"selected":"",onClick:()=>l("Cash on Delivery"),children:"Cash on Delivery"})]})]})}},6683:(e,a,s)=>{s.r(a),s.d(a,{default:()=>m});var n=s(9379),t=s(5043),r=s(9722),l=s(3216),i=s(2407),o=s(3254),d=s(2224),c=s(6471),u=s(7346),h=s(579);const m=()=>{(0,l.Zp)();const e=(0,l.zy)(),a=(0,i.xI)(),{cartItems:s,clearCart:m}=(0,t.useContext)(d.M),{showOrderNotification:p,showOrderStatusNotification:x,showOrderConfirmationNotification:y}=(0,c.hN)(),g=new URLSearchParams(e.search).get("userId"),[j,b]=(0,t.useState)(1),[v,N]=(0,t.useState)({fullName:"",phoneNumber:"",building:"",colony:"",region:"",city:"",area:"",address:""}),[C,S]=(0,t.useState)([]),[f,A]=(0,t.useState)(null),[q,k]=(0,t.useState)(!1),[P,w]=(0,t.useState)(""),[D,F]=(0,t.useState)(""),[L,O]=(0,t.useState)(""),[I,E]=(0,t.useState)(!1),[B,M]=(0,t.useState)(!0);(0,t.useEffect)(()=>{const e=(0,i.hg)(a,e=>{e&&e.uid===g?(E(!1),R(g)):(E(!0),M(!1))});return()=>e()},[a,g]);const R=async e=>{try{const a=await r.A.get("http://localhost:5000/api/users/".concat(e));a.data&&a.data.addresses&&(S(a.data.addresses),a.data.addresses.length>0&&(A(0),N(a.data.addresses[0]))),M(!1)}catch(D){console.error("Error fetching saved addresses:",D),M(!1)}},H=async e=>{try{200===(await r.A.put("http://localhost:5000/api/users/".concat(g),{addresses:e})).status?S(e):console.error("Failed to update addresses")}catch(D){console.error("Error updating addresses:",D)}},K=e=>{N((0,n.A)((0,n.A)({},v),{},{[e.target.name]:e.target.value}))};return B?(0,h.jsx)("div",{className:"checkout-container",children:(0,h.jsx)("h2",{children:"Loading..."})}):I?(0,h.jsxs)("div",{className:"checkout-container",children:[(0,h.jsx)("h2",{children:"Access Denied"}),(0,h.jsx)("p",{children:"You do not have permission to access this checkout page."})]}):(0,h.jsxs)("div",{className:"checkout-container",children:[(0,h.jsxs)("div",{className:"order-steps",children:[(0,h.jsx)("div",{className:"step ".concat(1===j?"active":""),children:"Shipping Info"}),(0,h.jsx)("div",{className:"step ".concat(2===j?"active":""),children:"Payment"}),(0,h.jsx)("div",{className:"step ".concat(3===j?"active":""),children:"Confirmation"})]}),1===j&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h2",{children:"Select Shipping Address"}),(0,h.jsx)("div",{className:"address-select-dropdown",children:(0,h.jsxs)("select",{value:null!==f?f:"add_new",onChange:e=>{const a=e.target.value;if("add_new"===a)k(!0),A(null);else{(e=>{A(e),C&&C.length>e?N(C[e]):N({fullName:"",phoneNumber:"",building:"",colony:"",region:"",city:"",area:"",address:""})})(parseInt(a,10)),k(!1)}},children:[C.length>0?C.map((e,a)=>(0,h.jsx)("option",{value:a,children:"Address ".concat(a+1)},a)):null,(0,h.jsx)("option",{value:"add_new",children:"Add New Address"})]})}),q&&(0,h.jsx)(u.A,{initialAddress:null!==f?C[f]:null,onSave:async e=>{try{if(null===f){const a=[...C,e];await H(a),A(a.length-1),N(e)}else{const a=[...C];a[f]=e,await H(a),N(e)}k(!1)}catch(D){console.error("Error saving address:",D)}},onCancel:()=>{k(!1)}}),D&&(0,h.jsx)("p",{className:"error-message",children:D}),L&&(0,h.jsx)("p",{className:"success-message",children:L}),!q&&(0,h.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(v.fullName.trim()?v.phoneNumber.trim()?v.building.trim()?v.colony.trim()?v.region.trim()?v.city.trim()?v.area.trim()?v.address.trim()?(F(""),1):(F("Address is required"),0):(F("Area is required"),0):(F("City is required"),0):(F("Region is required"),0):(F("Colony / Suburb / Locality / Landmark is required"),0):(F("Building / House No / Floor / Street is required"),0):(F("Phone number is required"),0):(F("Full name is required"),0))&&(F(""),O(""),b(2))},className:"checkout-form",children:[(0,h.jsxs)("label",{children:["Full name",(0,h.jsx)("input",{type:"text",name:"fullName",placeholder:"Enter your first and last name",value:v.fullName,onChange:K,required:!0})]}),(0,h.jsxs)("label",{children:["Phone Number",(0,h.jsx)("input",{type:"tel",name:"phoneNumber",placeholder:"Please enter your phone number",value:v.phoneNumber,onChange:K,required:!0})]}),(0,h.jsxs)("label",{children:["Building / House No / Floor / Street",(0,h.jsx)("input",{type:"text",name:"building",placeholder:"Please enter",value:v.building,onChange:K,required:!0})]}),(0,h.jsxs)("label",{children:["Colony / Suburb / Locality / Landmark",(0,h.jsx)("input",{type:"text",name:"colony",placeholder:"Please enter",value:v.colony,onChange:K,required:!0})]}),(0,h.jsxs)("label",{children:["Region",(0,h.jsx)("input",{type:"text",name:"region",placeholder:"Please choose your region",value:v.region,onChange:K,required:!0})]}),(0,h.jsxs)("label",{children:["City",(0,h.jsx)("input",{type:"text",name:"city",placeholder:"Please choose your city",value:v.city,onChange:K,required:!0})]}),(0,h.jsxs)("label",{children:["Area",(0,h.jsx)("input",{type:"text",name:"area",placeholder:"Please choose your area",value:v.area,onChange:K,required:!0})]}),(0,h.jsxs)("label",{children:["Address",(0,h.jsx)("textarea",{name:"address",placeholder:"For Example: House# 123, Street# 123, ABC Road",value:v.address,onChange:K,required:!0})]}),(0,h.jsx)("button",{type:"submit",children:"Next: Payment"})]})]}),2===j&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.default,{onSelectPaymentMethod:w}),(0,h.jsxs)("div",{className:"payment-navigation",children:[(0,h.jsx)("button",{onClick:()=>{b(1)},children:"Back to Shipping"}),(0,h.jsx)("button",{onClick:async()=>{try{if(!P)return void F("Please select a payment method");const e=s.reduce((e,a)=>e+(a.price||0)*(a.quantity||1),0),a=s.map(e=>({id:e.id,quantity:e.quantity||1})),n={shippingAddress:v,productDetails:a,paymentMethod:P,totalPrice:e,status:"processing",userId:g,orderDate:(new Date).toISOString()};await r.A.post("http://localhost:5000/api/orders",n);O("Order placed successfully!"),N({fullName:"",phoneNumber:"",building:"",colony:"",region:"",city:"",area:"",address:""}),w(""),m(),b(3),F("")}catch(D){F("Failed to place order. Please try again."),console.error("Order submission error:",D)}},children:"Place Order"})]})]}),3===j&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h2",{children:"Order Confirmation"}),(0,h.jsx)("p",{children:"Your order has been placed successfully!"})]})]})}},7346:(e,a,s)=>{s.d(a,{A:()=>l});var n=s(9379),t=s(5043),r=s(579);const l=e=>{let{initialAddress:a,onSave:s,onCancel:l}=e;const[i,o]=(0,t.useState)(a||{fullName:"",phoneNumber:"",building:"",colony:"",region:"",city:"",area:"",address:""}),d=e=>{const{name:a,value:s}=e.target;o(e=>(0,n.A)((0,n.A)({},e),{},{[a]:s}))};return(0,r.jsx)("div",{className:"address-card",children:(0,r.jsxs)("form",{className:"address-form",onSubmit:e=>{e.preventDefault(),s(i)},children:[(0,r.jsxs)("label",{children:["Full Name:",(0,r.jsx)("input",{type:"text",name:"fullName",value:i.fullName,onChange:d,required:!0})]}),(0,r.jsxs)("label",{children:["Phone Number:",(0,r.jsx)("input",{type:"text",name:"phoneNumber",value:i.phoneNumber,onChange:d,required:!0})]}),(0,r.jsxs)("label",{children:["Building / House No / Floor / Street:",(0,r.jsx)("input",{type:"text",name:"building",value:i.building,onChange:d})]}),(0,r.jsxs)("label",{children:["Colony / Suburb / Locality / Landmark:",(0,r.jsx)("input",{type:"text",name:"colony",value:i.colony,onChange:d})]}),(0,r.jsxs)("label",{children:["Region:",(0,r.jsx)("input",{type:"text",name:"region",value:i.region,onChange:d})]}),(0,r.jsxs)("label",{children:["City:",(0,r.jsx)("input",{type:"text",name:"city",value:i.city,onChange:d})]}),(0,r.jsxs)("label",{children:["Area:",(0,r.jsx)("input",{type:"text",name:"area",value:i.area,onChange:d})]}),(0,r.jsxs)("label",{children:["Address:",(0,r.jsx)("textarea",{name:"address",value:i.address,onChange:d})]}),(0,r.jsxs)("div",{className:"address-form-buttons",children:[(0,r.jsx)("button",{type:"submit",children:"Save"}),(0,r.jsx)("button",{type:"button",onClick:l,children:"Cancel"})]})]})})}}}]);
//# sourceMappingURL=683.83e82fba.chunk.js.map