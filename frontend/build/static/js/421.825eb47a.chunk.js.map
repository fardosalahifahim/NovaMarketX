{"version":3,"file":"static/js/421.825eb47a.chunk.js","mappings":"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","sources":["components/ProductDetails.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { useParams, Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport { getAuth } from 'firebase/auth';\r\nimport axios from 'axios';\r\nimport './ProductDetails.css';\r\nimport { CartContext } from '../contexts/CartContext';\r\nimport { useFavorites } from '../contexts/FavoritesContext';\r\nimport { useNotification } from '../contexts/NotificationContext';\r\n\r\nconst colors = ['#00bfff', '#ff4500', '#ffd700', '#8b4513'];\r\nconst sizes = [37, 38, 39, 40, 41, 42];\r\n\r\nfunction useQuery() {\r\n  return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nconst ProductDetails = () => {\r\n  const { addToCart } = useContext(CartContext);\r\n  const { addToFavorites, removeFromFavorites, isFavorite } = useFavorites();\r\n  const { showNotification } = useNotification();\r\n  const { productname } = useParams();\r\n  const query = useQuery();\r\n  const id = query.get('id');\r\n  const [product, setProduct] = useState(null);\r\n  const [selectedColor, setSelectedColor] = useState(colors[0]);\r\n  const [selectedSize, setSelectedSize] = useState(sizes[0]);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [mainImage, setMainImage] = useState('');\r\n  const [lastStockUpdate, setLastStockUpdate] = useState(null);\r\n  const navigate = useNavigate();\r\n  const auth = getAuth();\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      fetchProduct();\r\n    } else {\r\n      setProduct(null);\r\n    }\r\n  }, [id]);\r\n\r\n  // Function to fetch current product data for real-time updates\r\n  const fetchCurrentProductData = async () => {\r\n    if (!id) return;\r\n\r\n    try {\r\n      const res = await axios.get(\"http://localhost:5000/api/products/id/\" + encodeURIComponent(id));\r\n      setProduct(prevProduct => {\r\n        // Only update if there are changes to avoid unnecessary re-renders\r\n        if (JSON.stringify(prevProduct) !== JSON.stringify(res.data)) {\r\n          console.log('Updated product with real-time stock data');\r\n          return res.data;\r\n        }\r\n        return prevProduct;\r\n      });\r\n      setLastStockUpdate(new Date().toISOString());\r\n    } catch (error) {\r\n      console.error(\"Error fetching current product data:\", error);\r\n    }\r\n  };\r\n\r\n  // Update product data periodically (every 30 seconds)\r\n  useEffect(() => {\r\n    if (!product) return;\r\n\r\n    // Initial stock update\r\n    fetchCurrentProductData();\r\n\r\n    // Set up periodic updates\r\n    const intervalId = setInterval(fetchCurrentProductData, 30000); // 30 seconds\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [product?.id]); // Only re-run when product ID changes\r\n\r\n  useEffect(() => {\r\n    if (product) {\r\n      // Always set the first image as default, not videos\r\n      if (product.images && product.images.length > 0) {\r\n        setMainImage(product.images[0]);\r\n      } else if (product.imageUrl) {\r\n        setMainImage(product.imageUrl);\r\n      } else if (product.videos && product.videos.length > 0) {\r\n        // Only use video if no images are available\r\n        const videoUrl = product.videos[0];\r\n        let embedUrl = videoUrl;\r\n        \r\n        if (videoUrl.includes('youtube.com/watch')) {\r\n          const videoId = videoUrl.match(/v=([^&]+)/)?.[1];\r\n          if (videoId) {\r\n            embedUrl = `https://www.youtube.com/embed/${videoId}`;\r\n          }\r\n        } else if (videoUrl.includes('youtu.be/')) {\r\n          const videoId = videoUrl.match(/youtu.be\\/([^?]+)/)?.[1];\r\n          if (videoId) {\r\n            embedUrl = `https://www.youtube.com/embed/${videoId}`;\r\n          }\r\n        }\r\n        setMainImage(embedUrl);\r\n      }\r\n    }\r\n  }, [product]);\r\n\r\n  const fetchProduct = async () => {\r\n    console.log(\"Fetching product with ID:\", id);\r\n    try {\r\n      const res = await axios.get(\"http://localhost:5000/api/products/id/\" + encodeURIComponent(id));\r\n      console.log(\"Product data:\", res.data);\r\n      setProduct(res.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching product:\", error);\r\n      setProduct(null);\r\n    }\r\n  };\r\n\r\n  const handleAddToCart = () => {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      alert('You are not logged in. Please login to add items to cart.');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    const cartItem = {\r\n      id: product?.id,\r\n      name: product?.name,\r\n      price: product?.price || 0,\r\n      color: selectedColor,\r\n      size: selectedSize,\r\n      quantity,\r\n      imageUrl: mainImage || product?.imageUrl || ''\r\n    };\r\n    addToCart(cartItem);\r\n    alert('Added to cart!');\r\n  };\r\n\r\n  const handleBuyNow = () => {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      alert('You are not logged in. Please login to proceed to checkout.');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    // Add product to cart first\r\n    const cartItem = {\r\n      id: product?.id,\r\n      name: product?.name,\r\n      price: product?.price || 0,\r\n      color: selectedColor,\r\n      size: selectedSize,\r\n      quantity,\r\n      imageUrl: mainImage || product?.imageUrl || ''\r\n    };\r\n    addToCart(cartItem);\r\n    \r\n    // Then redirect to cart page\r\n    navigate('/cart');\r\n  };\r\n\r\n  // Function to get YouTube thumbnail from URL\r\n  const getYouTubeThumbnail = (videoUrl) => {\r\n    let videoId = '';\r\n    \r\n    if (videoUrl.includes('youtube.com/watch')) {\r\n      videoId = videoUrl.match(/v=([^&]+)/)?.[1];\r\n    } else if (videoUrl.includes('youtu.be/')) {\r\n      videoId = videoUrl.match(/youtu.be\\/([^?]+)/)?.[1];\r\n    } else if (videoUrl.includes('youtube.com/embed/')) {\r\n      videoId = videoUrl.match(/embed\\/([^?]+)/)?.[1];\r\n    }\r\n    \r\n    if (videoId) {\r\n      return `https://img.youtube.com/vi/${videoId}/0.jpg`;\r\n    }\r\n    return '';\r\n  };\r\n\r\n  // Function to convert video URL to embed URL\r\n  const convertToEmbedUrl = (videoUrl) => {\r\n    let embedUrl = videoUrl;\r\n    \r\n    if (videoUrl.includes('youtube.com/watch')) {\r\n      const videoId = videoUrl.match(/v=([^&]+)/)?.[1];\r\n      if (videoId) {\r\n        embedUrl = `https://www.youtube.com/embed/${videoId}`;\r\n      }\r\n    } else if (videoUrl.includes('youtu.be/')) {\r\n      const videoId = videoUrl.match(/youtu.be\\/([^?]+)/)?.[1];\r\n      if (videoId) {\r\n        embedUrl = `https://www.youtube.com/embed/${videoId}`;\r\n      }\r\n    }\r\n    \r\n    return embedUrl;\r\n  };\r\n\r\n  if (!product) return <div>Loading...</div>;\r\n\r\n  const price = typeof product.price === 'number' ? product.price : 0;\r\n  const allImages = product.images && product.images.length > 0 ? product.images : [product.imageUrl];\r\n\r\n  return (\r\n    <div className=\"product-details-container\">\r\n      <div className=\"product-details-content\">\r\n        <div className=\"product-image-section\">\r\n          <div className=\"main-image-container\">\r\n            {mainImage.includes('youtube.com/embed') ? (\r\n              <iframe\r\n                src={mainImage}\r\n                title=\"Product Video\"\r\n                className=\"main-product-video\"\r\n                frameBorder=\"0\"\r\n                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                allowFullScreen\r\n              />\r\n            ) : (\r\n              <img \r\n                src={mainImage.startsWith('http') ? mainImage : `http://localhost:5000/${mainImage}`} \r\n                alt={product.name} \r\n                className=\"main-product-image\" \r\n              />\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"thumbnail-container\">\r\n            {/* Image thumbnails */}\r\n            {allImages.map((image, index) => (\r\n              <img \r\n                key={`image-${index}`} \r\n                src={image.startsWith('http') ? image : `http://localhost:5000/${image}`} \r\n                alt={`${product.name} ${index + 1}`} \r\n                className={`thumbnail ${mainImage === image ? 'active' : ''}`}\r\n                onClick={() => {\r\n                  setMainImage(image);\r\n                }}\r\n              />\r\n            ))}\r\n            \r\n            {/* Video thumbnails */}\r\n            {product.videos && product.videos.map((video, index) => {\r\n              const embedUrl = convertToEmbedUrl(video);\r\n              const thumbnailUrl = getYouTubeThumbnail(video);\r\n              \r\n              return (\r\n                <img \r\n                  key={`video-${index}`} \r\n                  src={thumbnailUrl} \r\n                  alt={`Video ${index + 1}`} \r\n                  className={`thumbnail video-thumbnail ${mainImage === embedUrl ? 'active' : ''}`}\r\n                  onClick={() => {\r\n                    setMainImage(embedUrl);\r\n                  }}\r\n                  style={{ cursor: 'pointer' }}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"product-info\">\r\n          <h2 className=\"product-name\">{product.name || 'No Name'}</h2>\r\n          <p className=\"product-description\">{product.description || 'No Description'}</p>\r\n          <h3 className=\"product-price\">${price.toFixed(2)}</h3>\r\n          \r\n          <div className=\"product-colors\">\r\n            <strong>Color:</strong>\r\n            <div className=\"color-options\">\r\n              {colors.map(color => (\r\n                <div\r\n                  key={color}\r\n                  onClick={() => setSelectedColor(color)}\r\n                  className={\"color-circle \" + (selectedColor === color ? 'selected' : '')}\r\n                  style={{ backgroundColor: color }}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div className=\"product-sizes\">\r\n            <strong>Size:</strong>\r\n            <div className=\"size-options\">\r\n              {sizes.map(size => (\r\n                <button\r\n                  key={size}\r\n                  onClick={() => setSelectedSize(size)}\r\n                  className={\"size-button \" + (selectedSize === size ? 'selected' : '')}\r\n                >\r\n                  {size}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div className=\"product-quantity\">\r\n            <strong>Quantity:</strong>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={product?.stock || undefined}\r\n              value={quantity}\r\n              onChange={e => {\r\n                const value = parseInt(e.target.value) || 1;\r\n                const maxStock = product?.stock || Infinity;\r\n                setQuantity(Math.min(value, maxStock));\r\n              }}\r\n              className=\"quantity-input\"\r\n            />\r\n            {product?.stock && product.stock > 0 && (\r\n              <div className=\"stock-info\">\r\n                <span className=\"stock-available\">Only {product.stock} left in stock</span>\r\n              </div>\r\n            )}\r\n            {product?.stock === 0 && (\r\n              <div className=\"stock-info\">\r\n                <span className=\"out-of-stock\">Out of stock</span>\r\n              </div>\r\n            )}\r\n            {product?.maxPerPerson && (\r\n              <div className=\"stock-info\">\r\n                <span className=\"max-per-person\">Max per person: {product.maxPerPerson}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"button-container\">\r\n            <button\r\n              onClick={handleAddToCart}\r\n              className=\"add-to-cart-button\"\r\n              disabled={product?.stock === 0}\r\n            >\r\n              {product?.stock === 0 ? 'Out of Stock' : 'Add to cart'}\r\n            </button>\r\n            <button\r\n              onClick={handleBuyNow}\r\n              className=\"buy-now-button\"\r\n              disabled={product?.stock === 0}\r\n            >\r\n              {product?.stock === 0 ? 'Out of Stock' : 'Buy Now'}\r\n            </button>\r\n            <button\r\n              className={`favorite-btn ${isFavorite(product?.id) ? 'favorited' : ''}`}\r\n              onClick={() => {\r\n                if (isFavorite(product?.id)) {\r\n                  removeFromFavorites(product?.id);\r\n                  showNotification(`${product?.name} removed from favorites`, 'info');\r\n                } else {\r\n                  const success = addToFavorites(product);\r\n                  if (success) {\r\n                    showNotification(`${product?.name} added to favorites`, 'success');\r\n                  }\r\n                }\r\n              }}\r\n              title={isFavorite(product?.id) ? 'Remove from favorites' : 'Add to favorites'}\r\n            >\r\n              <svg\r\n                className=\"favorite-icon\"\r\n                width=\"24\"\r\n                height=\"24\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"\r\n                  fill=\"currentColor\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          <div className=\"back-to-shop\">\r\n            <Link to=\"/\">Back to Shop</Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductDetails;\r\n"],"names":["colors","sizes","ProductDetails","addToCart","useContext","CartContext","addToFavorites","removeFromFavorites","isFavorite","useFavorites","showNotification","useNotification","productname","useParams","id","URLSearchParams","useLocation","search","get","product","setProduct","useState","selectedColor","setSelectedColor","selectedSize","setSelectedSize","quantity","setQuantity","mainImage","setMainImage","lastStockUpdate","setLastStockUpdate","navigate","useNavigate","auth","getAuth","useEffect","fetchProduct","fetchCurrentProductData","async","res","axios","encodeURIComponent","prevProduct","JSON","stringify","data","console","log","Date","toISOString","error","intervalId","setInterval","clearInterval","images","length","imageUrl","videos","videoUrl","embedUrl","includes","_videoUrl$match","videoId","match","concat","_videoUrl$match2","_jsx","children","price","allImages","className","_jsxs","src","title","frameBorder","allow","allowFullScreen","startsWith","alt","name","map","image","index","onClick","video","_videoUrl$match6","_videoUrl$match7","convertToEmbedUrl","thumbnailUrl","_videoUrl$match3","_videoUrl$match4","_videoUrl$match5","getYouTubeThumbnail","style","cursor","description","toFixed","color","backgroundColor","size","type","min","max","stock","undefined","value","onChange","e","parseInt","target","maxStock","Infinity","Math","maxPerPerson","handleAddToCart","currentUser","alert","cartItem","disabled","handleBuyNow","width","height","viewBox","fill","xmlns","d","Link","to"],"sourceRoot":""}